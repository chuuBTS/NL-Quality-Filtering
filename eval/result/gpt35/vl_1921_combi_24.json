{
    "nl_utterance": "Trend of the sum of 7-day moving average of cases over date for countries UK, France, Germany, and Portugal.",
    "table_info": {
        "table_columns": [
            "date",
            "daterep",
            "date2",
            "day",
            "days",
            "month",
            "year",
            "cases",
            "deaths",
            "country",
            "geoid",
            "countryterritorycode",
            "popdata2019",
            "continentexp",
            "cumulative_number_for_14_days_of",
            "pop",
            "poprank",
            "t",
            "c",
            "cases_cml",
            "cases_ma7",
            "cases_pop",
            "cases_cml_pop",
            "deaths_cml",
            "deaths_ma7",
            "deaths_pop",
            "deaths_cml_pop",
            "deaths_rate",
            "neighbours",
            "p20"
        ],
        "table_samples": [
            {
                "date": 20191231,
                "daterep": "31/12/2019",
                "date2": "2019-12-31",
                "day": 31,
                "days": 1,
                "month": 12,
                "year": 2019,
                "cases": 0,
                "deaths": 0,
                "country": "Afghanistan",
                "geoid": "AF",
                "countryterritorycode": "AFG",
                "popdata2019": 38041757.0,
                "continentexp": "Asia",
                "cumulative_number_for_14_days_of": NaN,
                "pop": 38041757.0,
                "poprank": 37.0,
                "t": 1,
                "c": 1,
                "cases_cml": 0,
                "cases_ma7": NaN,
                "cases_pop": 0.0,
                "cases_cml_pop": 0.0,
                "deaths_cml": 0,
                "deaths_ma7": NaN,
                "deaths_pop": 0.0,
                "deaths_cml_pop": 0.0,
                "deaths_rate": NaN,
                "neighbours": 0,
                "p20": 0
            },
            {
                "date": 20200627,
                "daterep": "27/06/2020",
                "date2": "2020-6-27",
                "day": 27,
                "days": 180,
                "month": 6,
                "year": 2020,
                "cases": 3762,
                "deaths": 178,
                "country": "Peru",
                "geoid": "PE",
                "countryterritorycode": "PER",
                "popdata2019": 32510462.0,
                "continentexp": "America",
                "cumulative_number_for_14_days_of": 158.76428,
                "pop": 32510462.0,
                "poprank": 43.0,
                "t": 180,
                "c": 154,
                "cases_cml": 272364,
                "cases_ma7": 3996.5715,
                "cases_pop": 0.0001157166,
                "cases_cml_pop": 0.0083777336,
                "deaths_cml": 8939,
                "deaths_ma7": 211.14285,
                "deaths_pop": 5.4751604e-06,
                "deaths_cml_pop": 0.00027495765,
                "deaths_rate": 0.03282005,
                "neighbours": 0,
                "p20": 0
            },
            {
                "date": 20200812,
                "daterep": "12/08/2020",
                "date2": "2020-8-12",
                "day": 12,
                "days": 226,
                "month": 8,
                "year": 2020,
                "cases": 2,
                "deaths": 0,
                "country": "Burkina_Faso",
                "geoid": "BF",
                "countryterritorycode": "BFA",
                "popdata2019": 20321383.0,
                "continentexp": "Africa",
                "cumulative_number_for_14_days_of": 0.52653897,
                "pop": 20321383.0,
                "poprank": 58.0,
                "t": 226,
                "c": 32,
                "cases_cml": 1213,
                "cases_ma7": 8.5714283,
                "cases_pop": 9.8418496e-08,
                "cases_cml_pop": 5.9690818e-05,
                "deaths_cml": 54,
                "deaths_ma7": 0.0,
                "deaths_pop": 0.0,
                "deaths_cml_pop": 2.6572995e-06,
                "deaths_rate": 0.044517726,
                "neighbours": 0,
                "p20": 0
            },
            {
                "date": 20200414,
                "daterep": "14/04/2020",
                "date2": "2020-4-14",
                "day": 14,
                "days": 106,
                "month": 4,
                "year": 2020,
                "cases": 0,
                "deaths": 0,
                "country": "Montserrat",
                "geoid": "MS",
                "countryterritorycode": "MSF",
                "popdata2019": 4991.0,
                "continentexp": "America",
                "cumulative_number_for_14_days_of": 120.21639,
                "pop": 4991.0,
                "poprank": 210.0,
                "t": 106,
                "c": 133,
                "cases_cml": 11,
                "cases_ma7": 0.71428573,
                "cases_pop": 0.0,
                "cases_cml_pop": 0.0022039672,
                "deaths_cml": 0,
                "deaths_ma7": 0.0,
                "deaths_pop": 0.0,
                "deaths_cml_pop": 0.0,
                "deaths_rate": 0.0,
                "neighbours": 0,
                "p20": 0
            },
            {
                "date": 20200302,
                "daterep": "02/03/2020",
                "date2": "2020-3-2",
                "day": 2,
                "days": 63,
                "month": 3,
                "year": 2020,
                "cases": 3,
                "deaths": 0,
                "country": "Israel",
                "geoid": "IL",
                "countryterritorycode": "ISR",
                "popdata2019": 8519373.0,
                "continentexp": "Asia",
                "cumulative_number_for_14_days_of": 0.11737953,
                "pop": 8519373.0,
                "poprank": 99.0,
                "t": 63,
                "c": 99,
                "cases_cml": 10,
                "cases_ma7": 1.2857143,
                "cases_pop": 3.5213858e-07,
                "cases_cml_pop": 1.1737953e-06,
                "deaths_cml": 0,
                "deaths_ma7": 0.0,
                "deaths_pop": 0.0,
                "deaths_cml_pop": 0.0,
                "deaths_rate": 0.0,
                "neighbours": 0,
                "p20": 0
            }
        ]
    },
    "refer_fileds": [
        {
            "field": "date2",
            "type": "temporal"
        },
        {
            "field": "cases_ma7",
            "type": "quantitative",
            "aggregate": "sum"
        },
        {
            "field": "country",
            "type": "nominal"
        }
    ],
    "refer_others": [
        {
            "c_type": "task",
            "c_name": "trend",
            "c_list": [
                {
                    "mark": [
                        "bar",
                        "line",
                        "area"
                    ],
                    "encoding": {
                        "x": {
                            "type": "temporal"
                        }
                    }
                }
            ],
            "nl_ref_type": "explicit",
            "nl_ref_phrase": "..."
        },
        {
            "c_type": "transform",
            "c_name": "filter",
            "c_list": [
                {
                    "field": "country",
                    "oneOf": [
                        "UK",
                        "France",
                        "Germany",
                        "Portugal"
                    ]
                }
            ],
            "nl_ref_type": "explicit",
            "nl_ref_phrase": "..."
        },
        {
            "c_type": "transform",
            "c_name": "aggregate",
            "c_list": [
                {
                    "field": "cases_ma7",
                    "aggregate": "sum"
                }
            ],
            "nl_ref_type": "explicit",
            "nl_ref_phrase": "..."
        }
    ],
    "good_generated_chart_list": [
        {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "data": {
                "url": "https://raw.githubusercontent.com/chuuBTS/NL-Quality-Filtering/refs/heads/main/chart_dataset_csv/vl_1921.csv",
                "format": {
                    "type": "csv"
                }
            },
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "date2",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative",
                    "aggregate": "sum"
                },
                "color": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                }
            ]
        },
        {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "data": {
                "url": "https://raw.githubusercontent.com/chuuBTS/NL-Quality-Filtering/refs/heads/main/chart_dataset_csv/vl_1921.csv",
                "format": {
                    "type": "csv"
                }
            },
            "mark": "area",
            "encoding": {
                "x": {
                    "field": "date2",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative",
                    "aggregate": "sum"
                },
                "color": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                }
            ]
        }
    ],
    "predict35": [
        {
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "date",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative",
                    "aggregate": "sum"
                },
                "color": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                }
            ]
        },
        {
            "mark": "area",
            "encoding": {
                "x": {
                    "field": "date",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative",
                    "aggregate": "sum"
                },
                "color": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                }
            ]
        },
        {
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "date",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative"
                },
                "detail": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                },
                {
                    "window": [
                        {
                            "op": "sum",
                            "field": "cases_ma7",
                            "as": "cases_ma7_sum"
                        }
                    ],
                    "groupby": [
                        "date",
                        "country"
                    ]
                }
            ]
        },
        {
            "mark": "point",
            "encoding": {
                "x": {
                    "field": "date",
                    "type": "temporal"
                },
                "y": {
                    "field": "cases_ma7",
                    "type": "quantitative",
                    "aggregate": "sum"
                },
                "color": {
                    "field": "country",
                    "type": "nominal"
                }
            },
            "transform": [
                {
                    "filter": {
                        "field": "country",
                        "oneOf": [
                            "UK",
                            "France",
                            "Germany",
                            "Portugal"
                        ]
                    }
                }
            ]
        }
    ]
}